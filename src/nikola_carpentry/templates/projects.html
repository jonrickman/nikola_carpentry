{% extends 'base.html' %}

<!-- Head -->
{% block head %}
<title>Projects</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/projects.css') }}" type="text/css" />
{% endblock %}
<!--Body-->
{% block body %}

{% for message in get_flashed_messages() %}
<h2>{{ message }}</h2>
{% endfor %}

<div class="container">

<div class="mt-4 p-5 bg-primary text-white rounded">
  <h1>Custom Projects</h1>
</div>

{% if ready_projects %}
<div id="project-pane" class="container-fluid">

  {% for project in ready_projects %}
  <div class="project">
    <span class="project-title">{{ project.title }}</span>
    <br />

    <span class="project-date">{{ project.pretty_date() }}</span>
    <br />

    <div class="project-content">
      {{ project.content|safe }}
    </div>
    <br />
    <div class="project-files">
      {% for project_file in project.get_files() %}
      <img src={{ url_for('static', filename=project_file) }} class="project-image"/>
      {% endfor %}
    </div>
    <br />
    </form>
  </div>

  {% endfor %}
  <!-- end of project-pane -->
  {% endif %}

  {% if user.username %}
      <div class="container-fluid project">
      <span id="add-project">Add a project</span>
      <form method="POST" enctype="multipart/form-data">
        {{ form.hidden_tag()}}

        <div class="row">
          {{ form.title.label(class="project-title-label") }}
          {{ form.title(class="project-title") }}
        </div>

        <div class="project-content">
          {{ form.content.label}}
          {{ form.content() }}
          {{ ckeditor.load() }}
          {{ ckeditor.config(name='content') }}
        </div>

        <div class="row">
          {{ form.files }}
        </div>

        <div class="row">
          {{ form.submit(class="btn btn-primary col-sm-5")}}
        </div>
      </form>
    {% endif %}
  </div>
    {% endblock %}